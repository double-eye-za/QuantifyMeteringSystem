{% extends "base.html" %}
{% block title %}Change Password - Portal{% endblock %}
{% block page_title %}Change Password{% endblock %}
{% block breadcrumb %}
<a href="{{ url_for('portal.portal_dashboard') }}" class="hover:text-primary">Home</a>
<span class="mx-2">/</span>
<span>Change Password</span>
{% endblock %}

{% block content %}
<div class="max-w-md mx-auto">
  {% if force_change %}
  <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 mb-6">
    <div class="flex items-center gap-2 text-yellow-800 dark:text-yellow-400">
      <i class="fas fa-exclamation-triangle"></i>
      <p class="text-sm font-medium">You must change your password before continuing.</p>
    </div>
  </div>
  {% endif %}

  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
    <form method="POST" action="{{ url_for('portal.portal_change_password') }}" class="space-y-5">
      {% if not force_change %}
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Current Password <span class="text-red-500">*</span></label>
        <input type="password" name="current_password" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
      </div>
      {% endif %}

      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Password <span class="text-red-500">*</span></label>
        <input type="password" name="new_password" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm New Password <span class="text-red-500">*</span></label>
        <input type="password" name="confirm_password" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
      </div>

      <button type="submit" class="w-full px-4 py-2 bg-primary text-white font-medium rounded-lg hover:bg-blue-700"><i class="fas fa-key mr-1"></i> Change Password</button>
    </form>
  </div>
</div>
{% endblock %}
