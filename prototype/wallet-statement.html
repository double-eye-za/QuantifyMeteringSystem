<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet Statement - Unit A-101 - Quantify Metering</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#1A73E8',
                        secondary: '#34A853',
                        danger: '#EA4335',
                        warning: '#FBBC04'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                        <i class="fas fa-bolt text-white"></i>
                    </div>
                    <span class="font-bold text-lg text-gray-900 dark:text-white">Quantify</span>
                </div>
            </div>
            
            <nav class="p-4 space-y-2">
                <a href="index.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-gauge-high w-5"></i>
                    <span class="text-sm font-medium">Dashboard</span>
                </a>
                <a href="estates.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-building w-5"></i>
                    <span class="text-sm font-medium">Estates</span>
                </a>
                <a href="units.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-house w-5"></i>
                    <span class="text-sm font-medium">Units</span>
                </a>
                <a href="meters.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-tachometer-alt w-5"></i>
                    <span class="text-sm font-medium">Meters</span>
                </a>
                <a href="billing.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-wallet w-5"></i>
                    <span class="text-sm font-medium">Billing</span>
                </a>
                <a href="reports.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-chart-line w-5"></i>
                    <span class="text-sm font-medium">Reports</span>
                </a>
                <a href="rate-tables-simplified.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300">
                    <i class="fas fa-table w-5"></i>
                    <span class="text-sm font-medium">Rate Tables</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 overflow-y-auto">
            <!-- Header -->
            <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Prepaid Wallet Statement</h1>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Unit A-101 • John Smith • Willow Creek Estate</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <select onchange="changeStatementPeriod(this.value)" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm">
                            <option value="current">Current Month</option>
                            <option value="last">Last Month</option>
                            <option value="custom">Custom Period</option>
                        </select>
                        <button onclick="printStatement()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm">
                            <i class="fas fa-print mr-2"></i>Print
                        </button>
                        <button onclick="downloadStatement()" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 text-sm">
                            <i class="fas fa-download mr-2"></i>Download PDF
                        </button>
                    </div>
                </div>
            </header>

            <!-- Statement Content -->
            <div class="max-w-6xl mx-auto p-6">
                <!-- Wallet Summary Card -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6 overflow-hidden">
                    <div class="bg-gradient-to-r from-primary to-blue-600 text-white p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-2xl font-bold mb-2">Current Wallet Balance</h2>
                                <p class="text-4xl font-bold">R 450.00</p>
                                <p class="text-sm opacity-90 mt-2">Last top-up: R 500.00 on Oct 5, 2025</p>
                            </div>
                            <div class="text-right">
                                <div class="bg-white/20 rounded-lg px-4 py-3 backdrop-blur">
                                    <p class="text-sm mb-1">Estimated Days Remaining</p>
                                    <p class="text-3xl font-bold">12 days</p>
                                    <p class="text-xs mt-1">Based on avg. daily usage</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Stats -->
                    <div class="grid grid-cols-4 divide-x divide-gray-200 dark:divide-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50">
                        <div class="px-4 text-center">
                            <p class="text-xs text-gray-600 dark:text-gray-400">Month to Date Usage</p>
                            <p class="text-lg font-bold text-gray-900 dark:text-white">R 287.50</p>
                        </div>
                        <div class="px-4 text-center">
                            <p class="text-xs text-gray-600 dark:text-gray-400">Electricity (68%)</p>
                            <p class="text-lg font-bold text-yellow-600">R 195.50</p>
                        </div>
                        <div class="px-4 text-center">
                            <p class="text-xs text-gray-600 dark:text-gray-400">Water (32%)</p>
                            <p class="text-lg font-bold text-blue-600">R 92.00</p>
                        </div>
                        <div class="px-4 text-center">
                            <p class="text-xs text-gray-600 dark:text-gray-400">Daily Average</p>
                            <p class="text-lg font-bold text-gray-900 dark:text-white">R 31.94</p>
                        </div>
                    </div>
                </div>

                <!-- Consumption Breakdown -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Electricity Consumption -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                                <i class="fas fa-bolt text-yellow-500 mr-2"></i>Electricity Consumption
                            </h3>
                            <span class="text-2xl font-bold text-yellow-600">R 195.50</span>
                        </div>
                        
                        <div class="space-y-3">
                            <!-- Usage by Tier -->
                            <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                                <p class="text-xs text-gray-600 dark:text-gray-400 mb-2">Tiered Usage Breakdown</p>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-700 dark:text-gray-300">Block 1 (0-50 kWh)</span>
                                        <div class="flex items-center gap-2">
                                            <span class="text-xs text-gray-500">50 kWh @ R1.38</span>
                                            <span class="text-sm font-semibold">R 69.00</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-700 dark:text-gray-300">Block 2 (51-150 kWh)</span>
                                        <div class="flex items-center gap-2">
                                            <span class="text-xs text-gray-500">65 kWh @ R1.92</span>
                                            <span class="text-sm font-semibold">R 124.80</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-700 dark:text-gray-300">Solar Credit</span>
                                        <div class="flex items-center gap-2">
                                            <span class="text-xs text-gray-500">12 kWh free</span>
                                            <span class="text-sm font-semibold text-green-600">-R 0.00</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Total Electricity</span>
                                        <span class="font-bold text-yellow-600">R 195.50</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Daily Pattern -->
                            <div class="text-xs text-gray-500 dark:text-gray-400">
                                <p>Peak usage: Morning (6-9am) & Evening (6-10pm)</p>
                                <p>Total consumption: 127 kWh (12 kWh from solar)</p>
                            </div>
                        </div>
                    </div>

                    <!-- Water Consumption -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                                <i class="fas fa-tint text-blue-500 mr-2"></i>Water Consumption
                            </h3>
                            <span class="text-2xl font-bold text-blue-600">R 92.00</span>
                        </div>
                        
                        <div class="space-y-3">
                            <!-- Usage by Tier -->
                            <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                                <p class="text-xs text-gray-600 dark:text-gray-400 mb-2">Tiered Usage Breakdown</p>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-700 dark:text-gray-300">Block 1 (0-6 kL)</span>
                                        <div class="flex items-center gap-2">
                                            <span class="text-xs text-gray-500">6 kL @ R11.50</span>
                                            <span class="text-sm font-semibold">R 69.00</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-700 dark:text-gray-300">Block 2 (7-15 kL)</span>
                                        <div class="flex items-center gap-2">
                                            <span class="text-xs text-gray-500">1.3 kL @ R17.25</span>
                                            <span class="text-sm font-semibold">R 22.43</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Total Water</span>
                                        <span class="font-bold text-blue-600">R 92.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Daily Pattern -->
                            <div class="text-xs text-gray-500 dark:text-gray-400">
                                <p>Average daily: 245 L</p>
                                <p>Total consumption: 7.3 kL</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Transaction Statement -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                            Transaction Details - October 2025
                        </h3>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-gray-50 dark:bg-gray-700 text-xs uppercase text-gray-700 dark:text-gray-300">
                                <tr>
                                    <th class="px-4 py-3 text-left">Date & Time</th>
                                    <th class="px-4 py-3 text-left">Description</th>
                                    <th class="px-4 py-3 text-center">Usage</th>
                                    <th class="px-4 py-3 text-center">Rate</th>
                                    <th class="px-4 py-3 text-right">Debit</th>
                                    <th class="px-4 py-3 text-right">Credit</th>
                                    <th class="px-4 py-3 text-right">Balance</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- Opening Balance -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Oct 1, 00:00</td>
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Opening Balance</td>
                                    <td class="px-4 py-3 text-center">-</td>
                                    <td class="px-4 py-3 text-center">-</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right font-semibold">R 237.50</td>
                                </tr>
                                
                                <!-- Daily Transactions -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Oct 1, 23:59</td>
                                    <td class="px-4 py-3">
                                        <span class="text-gray-900 dark:text-gray-300">Daily Electricity</span>
                                        <span class="text-xs text-gray-500 block">Block 1: 5kWh, Block 2: 8kWh</span>
                                    </td>
                                    <td class="px-4 py-3 text-center">13 kWh</td>
                                    <td class="px-4 py-3 text-center text-xs">Mixed</td>
                                    <td class="px-4 py-3 text-right text-red-600">R 21.26</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right font-semibold">R 216.24</td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Oct 1, 23:59</td>
                                    <td class="px-4 py-3">
                                        <span class="text-gray-900 dark:text-gray-300">Daily Water</span>
                                        <span class="text-xs text-gray-500 block">Block 1: 210L</span>
                                    </td>
                                    <td class="px-4 py-3 text-center">0.21 kL</td>
                                    <td class="px-4 py-3 text-center text-xs">R11.50/kL</td>
                                    <td class="px-4 py-3 text-right text-red-600">R 2.42</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right font-semibold">R 213.82</td>
                                </tr>

                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Oct 2, 08:00</td>
                                    <td class="px-4 py-3">
                                        <span class="text-gray-900 dark:text-gray-300">Solar Credit Applied</span>
                                        <span class="text-xs text-gray-500 block">Free monthly allocation</span>
                                    </td>
                                    <td class="px-4 py-3 text-center">2 kWh</td>
                                    <td class="px-4 py-3 text-center text-xs">Free</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right text-green-600">R 0.00</td>
                                    <td class="px-4 py-3 text-right font-semibold">R 213.82</td>
                                </tr>

                                <!-- More daily entries... -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Oct 5, 14:30</td>
                                    <td class="px-4 py-3">
                                        <span class="text-gray-900 dark:text-gray-300 font-semibold">Wallet Top-up</span>
                                        <span class="text-xs text-gray-500 block">Payment Ref: #TXN-2025-10-05-1430</span>
                                    </td>
                                    <td class="px-4 py-3 text-center">-</td>
                                    <td class="px-4 py-3 text-center">-</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right text-green-600 font-semibold">R 500.00</td>
                                    <td class="px-4 py-3 text-right font-semibold">R 587.50</td>
                                </tr>

                                <!-- Current status -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                    <td class="px-4 py-3 text-gray-900 dark:text-gray-300">Oct 9, 12:00</td>
                                    <td class="px-4 py-3">
                                        <span class="text-gray-900 dark:text-gray-300">Month to Date Usage</span>
                                        <span class="text-xs text-gray-500 block">Electricity: 115kWh, Water: 7.3kL</span>
                                    </td>
                                    <td class="px-4 py-3 text-center">-</td>
                                    <td class="px-4 py-3 text-center">-</td>
                                    <td class="px-4 py-3 text-right text-red-600">R 137.50</td>
                                    <td class="px-4 py-3 text-right">-</td>
                                    <td class="px-4 py-3 text-right font-bold text-green-600">R 450.00</td>
                                </tr>
                            </tbody>
                            <tfoot class="bg-gray-100 dark:bg-gray-700 font-semibold">
                                <tr>
                                    <td colspan="4" class="px-4 py-3 text-gray-900 dark:text-gray-300">
                                        Current Balance as of Oct 9, 2025
                                    </td>
                                    <td class="px-4 py-3 text-right text-red-600">R 287.50</td>
                                    <td class="px-4 py-3 text-right text-green-600">R 500.00</td>
                                    <td class="px-4 py-3 text-right text-lg text-primary">R 450.00</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <!-- Consumption Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <!-- Electricity Summary -->
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg p-6 border border-yellow-200 dark:border-yellow-700">
                        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
                            <i class="fas fa-bolt text-yellow-500 mr-2"></i>Electricity Summary
                        </h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Total kWh Used:</span>
                                <span class="font-semibold">127 kWh</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Solar Credits:</span>
                                <span class="font-semibold text-green-600">12 kWh</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Billed Usage:</span>
                                <span class="font-semibold">115 kWh</span>
                            </div>
                            <div class="flex justify-between pt-2 border-t">
                                <span class="text-gray-600 dark:text-gray-400">Total Cost:</span>
                                <span class="font-bold text-yellow-600">R 195.50</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Avg Rate:</span>
                                <span class="text-xs">R 1.70/kWh</span>
                            </div>
                        </div>
                    </div>

                    <!-- Water Summary -->
                    <div class="bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-700">
                        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
                            <i class="fas fa-tint text-blue-500 mr-2"></i>Water Summary
                        </h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Total Used:</span>
                                <span class="font-semibold">7,300 L</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Volume (kL):</span>
                                <span class="font-semibold">7.3 kL</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Daily Avg:</span>
                                <span class="font-semibold">811 L</span>
                            </div>
                            <div class="flex justify-between pt-2 border-t">
                                <span class="text-gray-600 dark:text-gray-400">Total Cost:</span>
                                <span class="font-bold text-blue-600">R 92.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Avg Rate:</span>
                                <span class="text-xs">R 12.60/kL</span>
                            </div>
                        </div>
                    </div>

                    <!-- Wallet Health -->
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-700">
                        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
                            <i class="fas fa-wallet text-green-500 mr-2"></i>Wallet Health
                        </h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Days Left:</span>
                                <span class="font-semibold">~12 days</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Daily Usage:</span>
                                <span class="font-semibold">R 31.94</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-400">Recommended Top-up:</span>
                                <span class="font-semibold">Oct 21</span>
                            </div>
                            <div class="flex justify-between pt-2 border-t">
                                <span class="text-gray-600 dark:text-gray-400">Balance:</span>
                                <span class="font-bold text-green-600">R 450.00</span>
                            </div>
                            <div class="mt-2">
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 64%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">64% remaining</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projected Usage -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                        <i class="fas fa-chart-line text-purple-500 mr-2"></i>Projected Month-End Balance
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Based on current usage patterns (R31.94/day)
                            </p>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Current Balance</span>
                                    <span class="font-semibold">R 450.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Projected Usage (22 days)</span>
                                    <span class="text-red-600">-R 702.68</span>
                                </div>
                                <div class="flex justify-between items-center pt-2 border-t">
                                    <span class="text-sm font-semibold">Projected End Balance</span>
                                    <span class="text-2xl font-bold text-red-600">-R 252.68</span>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-700">
                                <p class="text-sm text-red-700 dark:text-red-300">
                                    <i class="fas fa-exclamation-triangle mr-2"></i>
                                    <strong>Action Required:</strong> Top-up of at least R 300 recommended by Oct 21 to avoid disconnection.
                                </p>
                            </div>
                        </div>
                        
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Usage Trend Chart
                            </p>
                            <div class="relative h-64">
                                <canvas id="usageTrendChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer Notes -->
                <div class="mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg text-xs text-gray-600 dark:text-gray-400">
                    <p class="mb-2"><strong>Important Notes:</strong></p>
                    <ul class="list-disc list-inside space-y-1">
                        <li>Electricity supply will be automatically disconnected when wallet reaches R0.00</li>
                        <li>Water supply continues but accumulates debt when wallet is depleted (for health and safety)</li>
                        <li>Solar credits are applied automatically and shown as free consumption</li>
                        <li>All rates include 15% VAT and 20% markup where applicable</li>
                        <li>For top-ups, use the mobile app or visit the estate office</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme Toggle
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            document.documentElement.classList.add('dark');
        }

        // Draw usage trend chart
        function drawUsageTrendChart() {
            const canvas = document.getElementById('usageTrendChart');
            if (canvas && canvas.getContext) {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw axes
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(30, 170);
                ctx.lineTo(380, 170);
                ctx.moveTo(30, 10);
                ctx.lineTo(30, 170);
                ctx.stroke();
                
                // Draw trend line
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                const data = [700, 668, 636, 604, 572, 540, 508, 476, 450, 418];
                const days = ['1', '2', '3', '4', '5', '6', '7', '8', '9 (Today)', '10'];
                
                data.forEach((value, index) => {
                    const x = 30 + (index * 35);
                    const y = 170 - ((value / 700) * 150);
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // Draw points
                    ctx.fillStyle = index === 8 ? '#10b981' : '#3b82f6';
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw labels
                    ctx.fillStyle = '#666';
                    ctx.font = '9px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(days[index], x, 185);
                    
                    // Draw values
                    if (index % 2 === 0) {
                        ctx.fillText('R' + value, x, y - 10);
                    }
                });
                
                ctx.stroke();
                
                // Draw projection
                ctx.strokeStyle = '#ef4444';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(30 + (8 * 35), 170 - ((450 / 700) * 150));
                ctx.lineTo(380, 170);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Legend
                ctx.font = '10px sans-serif';
                ctx.fillStyle = '#3b82f6';
                ctx.fillText('● Actual', 320, 20);
                ctx.fillStyle = '#ef4444';
                ctx.fillText('--- Projected', 320, 35);
            }
        }

        // Functions
        function changeStatementPeriod(period) {
            console.log('Changing period to:', period);
            // Reload data for selected period
        }

        function printStatement() {
            window.print();
        }

        function downloadStatement() {
            alert('Downloading PDF statement...');
        }

        // Initialize
        window.addEventListener('load', () => {
            drawUsageTrendChart();
        });
    </script>
</body>
</html>